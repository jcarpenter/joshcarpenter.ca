@use "sass:math";
@use "mixins-and-functions" as *;

// These are base styles that apply site-wide, to all sections.
// This is where resets and low-level styles are applied.


/*
========================================================
BASE: VARIABLES
========================================================
*/

:root {

	/* -------------- Typography -------------- */

	/*

	html font-size =        1 grid unit = 1 rem
	body line-height =      2 grid unit = 2 rem
	body font-size =        1.333 rem

	We're using a baseline grid. 
	We shift text elements to sit on their baseline
	by adding padding above, and then pull elements below 
	upwards by the same amount, using negative margin, so 
	the page flow is presetved.
	
	We try to only use bottom margin, but in some places 
	have to also use top.
	 
	*/

	--htmlFontSize: 11px;
	--bodyFontSize: 1.333rem;
	--grid: 1rem;
	
	// Scale up base font pixel size as screen size increases
	@include small-screen { --htmlFontSize: 12px; }
	@include xl-screen { --htmlFontSize: 13px; }
	@include xxl-screen { --htmlFontSize: 14px; }

	/* -------------- Layout -------------- */

	--side-margin: 1.5rem;

	@include small-screen { 
		--side-margin: 3rem; 
	}

	@include large-screen { 
		--side-margin: 4rem;
	}

	/* -------------- Colors -------------- */

	--bodyTextAlpha: 0.7;
	--foreground: 0, 0, 0;
	--accent: 0, 163, 102; // Vibrant-green
	--caption: 140, 140, 140;
	--background: 247, 247, 247;
	--on-background: 10, 10, 10;
	--popup: 65, 65, 65;
	--on-popup: 250, 250, 250;
	--lightboxForegroundColor: 255, 255, 255;
	--lightboxBackgroundColor: 20, 20, 20;

	// Color of overlay grid
	--overlayGrid: 0, 119, 179;

	@include dark {    
		--bodyTextAlpha: 0.7;
		--foreground: 255, 255, 255;
		--accent: 2, 252, 158; // Vibrant-green
		--caption: 120, 150, 180;
		--background: 30, 37, 45;
		--on-background: 180, 192, 207;
		--popup: 21, 23, 26;
		--on-popup: 173, 191, 212;
		--lightboxBackgroundColor: 10, 14, 16;
	}

	/* -------------- Misc -------------- */

	--lightboxFadeInDuration: 0.1s;
	--lightboxFadeOutDuration: 0.1s;

	/* -------------- Spacing -------------- */

	// Padding
  
	--small-pad: 1rem;
	--medium-pad: 2rem;
	--large-pad: 3rem;
	@include large-screen { 
		--small-pad: 2rem;
		--medium-pad: 3rem;
		--large-pad: 4rem; 
	}

	// Margin

	--small-margin: 1rem;
	--medium-margin: 2rem;
	--large-margin: 3rem;
	@include medium-screen { 
		--small-margin: 2rem;
		--medium-margin: 3rem;
		--large-margin: 4rem; 
	}
}


/*
========================================================
BASE: LAYOUT
========================================================
*/

html {
	font-size: var(--htmlFontSize);

	// Universal box sizing with inheritance:
	// Reset box-sizing to border-box for all elements (including 
	// pseudo elements). Set on html, and then tell all elements 
	// to inherit. This allows elements to override. 
	// Per: https://css-tricks.com/box-sizing/
	box-sizing: border-box;
}

*,
*:before,
*:after {
	box-sizing: inherit;
	word-break: normal;
	// line-height: inherit;
}

body {
	margin: 0;
	padding: 2rem 0rem;
	overflow-x: hidden;
	position: relative;
	color: onBackground(var(--bodyTextAlpha));
	background-color: background(1);
}

// We hide the outline on main, or else it appears when main is clicked.
// This happens because we set tabindex="-1" on main. We do that because
// it's recommended for the targets of "Skip to content" links.
// Per: https://webdesign.tutsplus.com/articles/keyboard-accessibility-tips-using-html-and-css--cms-31966
main:focus {
	outline: none;
}


/*
========================================================
BASE: ELEMENTS
========================================================
*/

/* -------------- Abbr -------------- */

abbr {
	font-variant-caps: all-small-caps;
	font-variant-numeric: oldstyle-nums;
}

/* -------------- Address -------------- */

address {
	font-style: normal;
}


/* -------------- Buttons -------------- */

button {
	background: transparent;
	border: none;
	padding: 0;
}

/* -------------- h1, h2, h3 -------------- */

h1,
h2,
h3 {
	font-kerning: normal;
}

/* -------------- h2 -------------- */

h2 {

	margin-bottom: 2rem;

	color: accent();

	// Slightly heavier on light mode
	font-weight: 300;
	@include light { font-weight: 400; }

	@include baselineShiftTypography(
		$fontSize: 1.333rem, 
		$lineHeight: 2rem
	);
}

/* -------------- Horizontal rule  -------------- */

hr {
	width: 100%;
	height: 0.5rem;
}

/* -------------- Images & Media -------------- */

img,
embed,
object,
video {
	max-width: 100%;
	height: auto;
}

/* -------------- Links -------------- */

a {
	@include outline-on-focus;
	transition: color 0.1s, text-decoration-color 0.1s;
}

/* -------------- Paragraph -------------- */
	
p {
	// By default, remove top margin
	margin-top: 0;
}
